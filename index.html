<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>80s Dice</title>
    
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Würfel">
    <meta name="apple-mobile-web-app-title" content="Würfel">
    <meta name="theme-color" content="#000000">
    <meta name="msapplication-navbutton-color" content="#000000">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <link rel="manifest" href="data:application/manifest+json,{%22name%22:%22Würfel%22,%22short_name%22:%22Würfel%22,%22start_url%22:%22index.html%22,%22display%22:%22standalone%22,%22background_color%22:%22#000000%22,%22theme_color%22:%22#000000%22}">

    <style>
        /* Dein bisheriger CSS Code */
    </style>
</head>
<body>

<div class="container">
    <div id="dice">
        <div class="side sFront">1</div>
        <div class="side sBack">6</div>
        <div class="side sRight">2</div>
        <div class="side sLeft">5</div>
        <div class="side sTop">3</div>
        <div class="side sBottom">4</div>
    </div>
</div>

<button onclick="roll()">GO</button>

<script>
    function playBeep() {
        try {
            const context = new (window.AudioContext || window.webkitAudioContext)();
            const osc = context.createOscillator();
            const gain = context.createGain();
            osc.type = 'square';
            osc.frequency.setValueAtTime(150, context.currentTime);
            gain.gain.setValueAtTime(0.1, context.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, context.currentTime + 0.1);
            osc.connect(gain);
            gain.connect(context.destination);
            osc.start();
            osc.stop(context.currentTime + 0.1);
        } catch(e) {}
    }

    function roll() {
        const d = document.getElementById('dice');
        
        // 1. Zufälliges Ergebnis festlegen
        const result = Math.floor(Math.random() * 6);
        
        // 2. Ziel-Rotationen passend zu den CSS-Klassen
        const targets = [
            {x: 0, y: 0},          // 1 (Front)
            {x: 0, y: 180},        // 6 (Back)
            {x: 0, y: -90},        // 2 (Right)
            {x: 0, y: 90},         // 5 (Left)
            {x: -90, y: 0},        // 3 (Top)
            {x: 90, y: 0}          // 4 (Bottom)
        ];
        
        const target = targets[result];
        
        // 3. Volle Drehungen (4-6 Runden) für den Effekt
        const roundsX = (Math.floor(Math.random() * 3) + 4) * 360;
        const roundsY = (Math.floor(Math.random() * 3) + 4) * 360;
        
        const finalX = roundsX + target.x;
        const finalY = roundsY + target.y;
        
        // 4. Animation starten (Cubic-Bezier für sanftes Bremsen)
        d.style.transition = "transform 1.5s cubic-bezier(0.15, 0, 0.15, 1)";
        d.style.transform = `rotateX(${finalX}deg) rotateY(${finalY}deg)`;

        // 5. Sound nach der Drehung
        setTimeout(() => {
            playBeep();
            
            // Werte normalisieren, damit beim nächsten Klick kein Sprung passiert
            setTimeout(() => {
                d.style.transition = "none";
                d.style.transform = `rotateX(${target.x}deg) rotateY(${target.y}deg)`;
            }, 1550);
            
        }, 1450); 
    }
</script>
</body>
</html>

